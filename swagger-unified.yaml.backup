  /bookings/user/{id}:
    servers:
      - url: https://097aqk2gwf.execute-api.us-east-1.amazonaws.com/dev
        description: Bookings Service
    get:
      summary: Get user bookings
      description: |
        Retrieve all bookings for a user by their user ID. Requires authentication. Returns a list of bookings where the user is the guest.
        
        **Base URL:** https://097aqk2gwf.execute-api.us-east-1.amazonaws.com/dev      
      tags: [Bookings]
      security:
        - BearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
          description: User ID
      responses:
        '200':
          description: User bookings retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  data:
                    type: object
                    properties:
                      bookings:
                        type: array
                        items:
                          $ref: '#/components/schemas/Booking'
                      count:
                        type: integer
                        example: 2
                      message:
                        type: string
                        example: "User bookings retrieved successfully"
        '400':
          description: Bad request - invalid user ID
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
              example:
                success: false
                error: "Invalid user ID format"
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
              example:
                success: false
                error: "Unauthorized - Invalid or missing token"
        '404':
          description: No bookings found for this user
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
              example:
                success: false
                error: "No bookings found for this user"
        '500':
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
              example:
                success: false
                error: "Internal server error"
        '503':
          description: Database connection failed
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
              example:
                success: false
                error: "Database connection failed"

  /bookings/host/{id}:
    servers:
      - url: https://097aqk2gwf.execute-api.us-east-1.amazonaws.com/dev
        description: Bookings Service
    get:
      summary: Get host bookings
      description: |
        Retrieve all bookings for a host by their host ID. Requires authentication. Returns a list of bookings where the user is the host.
        
        **Base URL:** https://097aqk2gwf.execute-api.us-east-1.amazonaws.com/dev
      tags: [Bookings]
      security:
        - BearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
          description: Host ID
      responses:
        '200':
          description: Host bookings retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  data:
                    type: object
                    properties:
                      bookings:
                        type: array
                        items:
                          $ref: '#/components/schemas/Booking'
                      count:
                        type: integer
                        example: 3
                      message:
                        type: string
                        example: "Host bookings retrieved successfully"
        '400':
          description: Bad request - invalid host ID
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
              example:
                success: false
                error: "Invalid host ID format"
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
              example:
                success: false
                error: "Unauthorized - Invalid or missing token"
        '404':
          description: No bookings found for this host
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
              example:
                success: false
                error: "No booking found with this hostId"
        '500':
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
              example:
                success: false
                error: "Internal server error"
        '503':
          description: Database connection failed
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
              example:
                success: false
                error: "Database connection failed"

  /bookings/history/user/{id}:
    servers:
      - url: https://097aqk2gwf.execute-api.us-east-1.amazonaws.com/dev
        description: Bookings Service
    get:
      summary: Get user booking history
      description: |
        Retrieve past bookings for a user by their user ID. Requires authentication. Returns a list of completed and cancelled bookings where the user is the guest.
        
        **Base URL:** https://097aqk2gwf.execute-api.us-east-1.amazonaws.com/dev
      tags: [Bookings]
      security:
        - BearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
          description: User ID
      responses:
        '200':
          description: User booking history retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  data:
                    type: object
                    properties:
                      bookings:
                        type: array
                        items:
                          $ref: '#/components/schemas/Booking'
                      count:
                        type: integer
                        example: 5
                      message:
                        type: string
                        example: "User booking history retrieved successfully"
        '400':
          description: Bad request - invalid user ID
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
              example:
                success: false
                error: "Invalid user ID format"
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
              example:
                success: false
                error: "Unauthorized - Invalid or missing token"
        '404':
          description: No past bookings found for this user
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
              example:
                success: false
                error: "No past booking found with this userId"
        '500':
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
              example:
                success: false
                error: "Internal server error"
        '503':
          description: Database connection failed
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
              example:
                success: false
                error: "Database connection failed"

  /bookings/history/host/{id}:
    servers:
      - url: https://097aqk2gwf.execute-api.us-east-1.amazonaws.com/dev
        description: Bookings Service
    get:
      summary: Get host booking history
      description: |
        Retrieve past bookings for a host by their host ID. Requires authentication. Returns a list of completed and cancelled bookings where the user is the host.
        
        **Base URL:** https://097aqk2gwf.execute-api.us-east-1.amazonaws.com/dev
      tags: [Bookings]
      security:
        - BearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
          description: Host ID
      responses:
        '200':
          description: Host booking history retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  data:
                    type: object
                    properties:
                      bookings:
                        type: array
                        items:
                          $ref: '#/components/schemas/Booking'
                      count:
                        type: integer
                        example: 8
                      message:
                        type: string
                        example: "Host booking history retrieved successfully"
        '400':
          description: Bad request - invalid host ID
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
              example:
                success: false
                error: "Invalid host ID format"
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
              example:
                success: false
                error: "Unauthorized - Invalid or missing token"
        '404':
          description: No past bookings found for this host
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
              example:
                success: false
                error: "No past booking found with this hostId"
        '500':
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
              example:
                success: false
                error: "Internal server error"
        '503':
          description: Database connection failed
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
              example:
                success: false
                error: "Database connection failed"

  # Payment-related endpoints (NOT YET DEPLOYED - Development/Testing only)
  /bookings/payment-intent:
    servers:
      - url: https://097aqk2gwf.execute-api.us-east-1.amazonaws.com/dev
        description: Bookings Service
    post:
      summary: Create payment intent (NOT DEPLOYED)
      description: |
        Create a payment intent for a booking. Requires authentication. The request body must include the booking ID, amount, and currency. Returns a client secret and payment intent ID for use with payment processing (e.g., Stripe).
        
        **⚠️ NOTE: This endpoint is NOT YET DEPLOYED and is for development/testing purposes only.**
        
        **Base URL:** https://097aqk2gwf.execute-api.us-east-1.amazonaws.com/dev
      tags: [Bookings]
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required: [bookingId, amount, currency]
              properties:
                bookingId:
                  type: string
                  description: ID of the booking
                  example: "book123"
                amount:
                  type: number
                  description: Payment amount in cents
                  example: 45000
                currency:
                  type: string
                  description: Payment currency (3-letter code)
                  example: "usd"
            example:
              bookingId: "book123"
              amount: 45000
              currency: "usd"
      responses:
        '200':
          description: Payment intent created successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  data:
                    type: object
                    properties:
                      message:
                        type: string
                        example: "Payment intent created successfully"
                      clientSecret:
                        type: string
                        example: "pi_1234567890_secret_abcdefghijklmnop"
                      paymentIntentId:
                        type: string
                        example: "pi_1234567890"
                      amount:
                        type: number
                        example: 45000
                      currency:
                        type: string
                        example: "usd"
        '400':
          description: Bad request - validation error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
              example:
                success: false
                error: "Validation error: Invalid amount"
        '401':
          description: User authentication required
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
              example:
                success: false
                error: "User authentication required"
        '403':
          description: Unauthorized to make payment for this booking
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
              example:
                success: false
                error: "Unauthorized to make payment for this booking"
        '404':
          description: Booking not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
              example:
                success: false
                error: "Booking not found"
        '409':
          description: Payment intent already exists for this booking
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
              example:
                success: false
                error: "Payment intent already exists for this booking"
        '500':
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
              example:
                success: false
                error: "Internal server error"

  /bookings/{id}/payment:
    servers:
      - url: https://097aqk2gwf.execute-api.us-east-1.amazonaws.com/dev
        description: Bookings Service
    post:
      summary: Confirm payment (NOT DEPLOYED)
      description: |
        Process a payment for a booking by its ID. Requires authentication. The request body must include a valid payment method ID. Returns the payment status and payment ID.
        
        **⚠️ NOTE: This endpoint is NOT YET DEPLOYED and is for development/testing purposes only.**
        
        **Base URL:** https://097aqk2gwf.execute-api.us-east-1.amazonaws.com/dev
      tags: [Bookings]
      security:
        - BearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
          description: Booking ID
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required: [paymentIntentId, bookingId]
              properties:
                paymentIntentId:
                  type: string
                  description: Stripe payment intent ID
                  example: "pi_1234567890"
                bookingId:
                  type: string
                  description: Booking ID
                  example: "book123"
            example:
              paymentIntentId: "pi_1234567890"
              bookingId: "book123"
      responses:
        '200':
          description: Payment processed successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  data:
                    type: object
                    properties:
                      success:
                        type: boolean
                        example: true
                      booking:
                        type: object
                        properties:
                          _id:
                            type: string
                            example: "book123"
                          status:
                            type: string
                            example: "confirmed"
                          payment:
                            type: object
                            properties:
                              status:
                                type: string
                                example: "completed"
                              amount:
                                type: number
                                example: 45000
                              currency:
                                type: string
                                example: "usd"
        '400':
          description: Payment failed
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
              example:
                success: false
                error: "Payment failed"
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
              example:
                success: false
                error: "Unauthorized"
        '404':
          description: Booking not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
              example:
                success: false
                error: "Booking not found"
        '500':
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
              example:
                success: false
                error: "Internal server error"

  /bookings/{id}/refund:
    servers:
      - url: https://097aqk2gwf.execute-api.us-east-1.amazonaws.com/dev
        description: Bookings Service
    post:
      summary: Process refund (NOT DEPLOYED)
      description: |
        Process a refund for a booking by its ID. Requires authentication. The request body must include the booking ID and optionally amount and reason. Returns the refund status and details.
        
        **⚠️ NOTE: This endpoint is NOT YET DEPLOYED and is for development/testing purposes only.**
        
        **Base URL:** https://097aqk2gwf.execute-api.us-east-1.amazonaws.com/dev
      tags: [Bookings]
      security:
        - BearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
          description: Booking ID
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required: [bookingId]
              properties:
                bookingId:
                  type: string
                  description: ID of the booking
                  example: "book123"
                amount:
                  type: number
                  description: Refund amount (optional, full refund if not provided)
                  example: 45000
                reason:
                  type: string
                  description: Reason for refund
                  example: "Guest requested cancellation"
            example:
              bookingId: "book123"
              amount: 45000
              reason: "Guest requested cancellation"
      responses:
        '200':
          description: Refund processed successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  data:
                    type: object
                    properties:
                      success:
                        type: boolean
                        example: true
                      refund:
                        type: object
                        properties:
                          amount:
                            type: number
                            example: 45000
                          status:
                            type: string
                            example: "succeeded"
                      booking:
                        type: object
                        properties:
                          _id:
                            type: string
                            example: "book123"
                          status:
                            type: string
                            example: "refunded"
        '400':
          description: Refund failed
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
              example:
                success: false
                error: "Refund failed"
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
              example:
                success: false
                error: "Unauthorized"
        '403':
          description: Unauthorized to process refund for this booking
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
              example:
                success: false
                error: "Unauthorized to process refund for this booking"
        '404':
          description: Booking not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
              example:
                success: false
                error: "Booking not found"
        '500':
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
              example:
                success: false
                error: "Internal server error"

  # Additional handlers that exist but are NOT DEPLOYED
  # /bookings/search - searchPropertiesHandler.js (NOT DEPLOYED)
  # /bookings/webhook - stripeWebhookHandler.js (NOT DEPLOYED)
  # These handlers exist in the codebase but are not configured in serverless.yaml
  # and therefore are not accessible via API Gateway.